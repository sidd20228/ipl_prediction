<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPL 2025 Top-2 Finish Chances & Scenarios</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto p-4">
        <h1 class="text-3xl font-bold text-center mb-6">IPL 2025 Top-2 Finish Chances & Scenarios</h1>
        <p class="text-center mb-4">Based on Monte Carlo Simulation (10,000 iterations) with NRR</p>
        <p class="text-center mb-4 text-sm">Data sourced from iplt20.com (placeholder). Replace with API fetch for real-time updates.</p>
        <div id="results" class="overflow-x-auto mb-8">
            <table class="min-w-full bg-white shadow-md rounded-lg">
                <thead>
                    <tr class="bg-blue-600 text-white">
                        <th class="py-3 px-6 text-left">Team</th>
                        <th class="py-3 px-6 text-left">Top-2 Chance (%)</th>
                        <th class="py-3 px-6 text-left">Current Points</th>
                        <th class="py-3 px-6 text-left">Current NRR</th>
                    </tr>
                </thead>
                <tbody id="teamTable">
                    <!-- Results will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <div id="scenarios" class="bg-white shadow-md rounded-lg p-6">
            <h2 class="text-2xl font-bold mb-4">Scenarios for Top 4 Teams to Reach Top 2</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="text-xl font-semibold">Gujarat Titans (GT)</h3>
                    <ul class="list-disc pl-5">
                        <li><strong>Win 5 of 6 matches (20 points, NRR ~+1.159):</strong> Almost guarantees 1st place. Needs 5 wins (~3% chance) and maintaining high NRR.</li>
                        <li><strong>Win 4 of 6 matches (18 points, NRR ~+1.080):</strong> Highly likely for top-2 (~15% chance). Needs DC/RCB to win ≤3 matches.</li>
                        <li><strong>Win 3 of 6 matches (16 points, NRR ~+1.001):</strong> Borderline (~35% chance). Needs DC/RCB/MI to win ≤3 matches and NRR advantage.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold">Delhi Capitals (DC)</h3>
                    <ul class="list-disc pl-5">
                        <li><strong>Win 5 of 6 matches (20 points, NRR ~+0.742):</strong> Ensures top-2 (~3% chance). Needs GT to win ≤4 matches.</li>
                        <li><strong>Win 4 of 6 matches (18 points, NRR ~+0.678):</strong> Strong chance (~15% chance). Needs GT to win ≤3 or RCB/MI to win ≤3.</li>
                        <li><strong>Win 3 of 6 matches (16 points, NRR ~+0.614):</strong> Possible (~35% chance). Needs GT/RCB/MI to win ≤3 and NRR edge over RCB.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold">Royal Challengers Bengaluru (RCB)</h3>
                    <ul class="list-disc pl-5">
                        <li><strong>Win 5 of 5 matches (20 points, NRR ~+0.536):</strong> Near-certain top-2 (~3% chance). Needs GT/DC to win ≤4 matches.</li>
                        <li><strong>Win 4 of 5 matches (18 points, NRR ~+0.464):</strong> Likely (~15% chance). Needs GT/DC to win ≤3 or MI to win ≤3.</li>
                        <li><strong>Win 3 of 5 matches (16 points, NRR ~+0.392):</strong> Challenging (~30% chance). Needs GT/DC/MI to win ≤3 and NRR above MI.</li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-semibold">Mumbai Indians (MI)</h3>
                    <ul class="list-disc pl-5">
                        <li><strong>Win 6 of 6 matches (20 points, NRR ~+0.325):</strong> Strong chance (~1% chance). Needs GT/DC/RCB to win ≤4 matches.</li>
                        <li><strong>Win 5 of 6 matches (18 points, NRR ~+0.262):</strong> Possible (~6% chance). Needs GT/DC/RCB to win ≤3 matches.</li>
                        <li><strong>Win 4 of 6 matches (16 points, NRR ~+0.200):</strong> Unlikely (~20% chance). Needs GT/DC/RCB to win ≤2 and NRR edge.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Placeholder for real-time data (replace with API fetch)
        const teams = [
            { name: "Gujarat Titans (GT)", points: 12, matchesPlayed: 8, wins: 6, losses: 2, nrr: 1.104, runsScored: 1400, oversFaced: 160, runsConceded: 1300, oversBowled: 160 },
            { name: "Delhi Capitals (DC)", points: 12, matchesPlayed: 8, wins: 6, losses: 2, nrr: 0.657, runsScored: 1350, oversFaced: 160, runsConceded: 1250, oversBowled: 160 },
            { name: "Royal Challengers Bengaluru (RCB)", points: 12, matchesPlayed: 9, wins: 6, losses: 3, nrr: 0.482, runsScored: 1500, oversFaced: 180, runsConceded: 1400, oversBowled: 180 },
            { name: "Mumbai Indians (MI)", points: 10, matchesPlayed: 8, wins: 5, losses: 3, nrr: 0.200, runsScored: 1300, oversFaced: 160, runsConceded: 1250, oversBowled: 160 },
            { name: "Punjab Kings (PBKS)", points: 10, matchesPlayed: 8, wins: 5, losses: 3, nrr: 0.100, runsScored: 1280, oversFaced: 160, runsConceded: 1260, oversBowled: 160 },
            { name: "Lucknow Super Giants (LSG)", points: 10, matchesPlayed: 8, wins: 5, losses: 3, nrr: -0.050, runsScored: 1250, oversFaced: 160, runsConceded: 1280, oversBowled: 160 },
            { name: "Kolkata Knight Riders (KKR)", points: 6, matchesPlayed: 8, wins: 3, losses: 5, nrr: -0.300, runsScored: 1200, oversFaced: 160, runsConceded: 1300, oversBowled: 160 },
            { name: "Sunrisers Hyderabad (SRH)", points: 4, matchesPlayed: 8, wins: 2, losses: 6, nrr: -0.400, runsScored: 1150, oversFaced: 160, runsConceded: 1300, oversBowled: 160 },
            { name: "Rajasthan Royals (RR)", points: 4, matchesPlayed: 8, wins: 2, losses: 6, nrr: -0.600, runsScored: 1100, oversFaced: 160, runsConceded: 1300, oversBowled: 160 },
            { name: "Chennai Super Kings (CSK)", points: 4, matchesPlayed: 8, wins: 2, losses: 6, nrr: -0.800, runsScored: 1050, oversFaced: 160, runsConceded: 1300, oversBowled: 160 }
        ];

        // Monte Carlo Simulation for Top-2 Finish
        function runMonteCarlo(iterations = 10000) {
            const top2Counts = new Array(teams.length).fill(0);
            const totalMatches = 14;
            const pointsPerWin = 2;
            const avgRunsPerMatch = 170;
            const oversPerMatch = 20;

            for (let i = 0; i < iterations; i++) {
                // Simulate remaining matches
                const simTeams = teams.map(team => ({
                    points: team.points,
                    runsScored: team.runsScored,
                    oversFaced: team.oversFaced,
                    runsConceded: team.runsConceded,
                    oversBowled: team.oversBowled,
                    matchesRemaining: totalMatches - team.matchesPlayed
                }));

                for (let j = 0; j < simTeams.length; j++) {
                    for (let k = 0; k < simTeams[j].matchesRemaining; k++) {
                        if (Math.random() < 0.5) { // 50% win chance
                            simTeams[j].points += pointsPerWin;
                            simTeams[j].runsScored += avgRunsPerMatch;
                            simTeams[j].oversFaced += oversPerMatch;
                            simTeams[j].runsConceded += avgRunsPerMatch - 10;
                            simTeams[j].oversBowled += oversPerMatch;
                        } else {
                            simTeams[j].runsScored += avgRunsPerMatch - 10;
                            simTeams[j].oversFaced += oversPerMatch;
                            simTeams[j].runsConceded += avgRunsPerMatch;
                            simTeams[j].oversBowled += oversPerMatch;
                        }
                    }
                }

                // Calculate NRR and sort teams
                const finalStandings = simTeams.map((team, index) => {
                    const nrr = (team.runsScored / team.oversFaced) - (team.runsConceded / team.oversBowled);
                    return { index, points: team.points, nrr };
                });
                finalStandings.sort((a, b) => b.points - a.points || b.nrr - a.nrr);

                // Top 2 qualify
                for (let j = 0; j < 2; j++) {
                    top2Counts[finalStandings[j].index]++;
                }
            }

            // Calculate percentages
            return teams.map((team, index) => ({
                name: team.name,
                top2Chance: (top2Counts[index] / iterations * 100).toFixed(2),
                points: team.points,
                nrr: team.nrr.toFixed(3)
            }));
        }

        // Display results
        function displayResults() {
            const results = runMonteCarlo();
            const tableBody = document.getElementById("teamTable");
            tableBody.innerHTML = "";
            results.forEach(team => {
                const row = document.createElement("tr");
                row.className = "border-b";
                row.innerHTML = `
                    <td class="py-3 px-6">${team.name}</td>
                    <td class="py-3 px-6">${team.top2Chance}%</td>
                    <td class="py-3 px-6">${team.points}</td>
                    <td class="py-3 px-6">${team.nrr}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Placeholder for API fetch (uncomment and configure when API is available)
        /*
        async function fetchRealTimeData() {
            try {
                const response = await fetch('https://api.iplt20.com/points-table'); // Hypothetical API
                const data = await response.json();
                // Update teams array with real-time data (points, matchesPlayed, nrr, runsScored, etc.)
                // Example: teams = data.teams.map(team => ({ name: team.name, points: team.points, ... }));
                displayResults();
            } catch (error) {
                console.error('Error fetching real-time data:', error);
                displayResults(); // Fallback to static data
            }
        }
        window.onload = fetchRealTimeData;
        */

        // Use static data for now
        window.onload = displayResults;
    </script>
</body>
</html>